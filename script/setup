#!/bin/bash

link_files() {
  for i in $HOME/dotfiles/*; do
    local base_name="$(basename $i)"
    [[ $base_name =~ ^(LICENSE|script|bin|init.el)$ ]] && continue
    echo "ðŸ‘‰ Linking $base_name..."
    [[ -h $HOME/.$base_name ]] && rm $HOME/.$base_name
    ln -sf $i $HOME/.$base_name
  done

  echo "ðŸ‘‰ Linking bin..."
  [[ -h $HOME/bin ]] && rm $HOME/bin
  ln -sf $HOME/dotfiles/bin $HOME/bin

  echo "ðŸ‘‰ Linking emacs.d/init.el..."
  mkdir -p $HOME/.emacs.d
  [[ -h $HOME/.emacs.d/init.el ]] && rm $HOME/.emacs.d/init.el
  ln -sf $HOME/dotfiles/init.el $HOME/.emacs.d/init.el
}

create_directories() {
  mkdir -p $HOME/projects/{personal,work}
  echo "ðŸ‘‰ Creating directories on '~/projects'..."
}

# Install ohmyzsh
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

link_files
create_directories

$HOME/dotfiles/script/osx_customization

echo "ðŸŽ‰  Done!"
